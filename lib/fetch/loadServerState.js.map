{"version":3,"sources":["../../src/fetch/loadServerState.js"],"names":["cb","renderProps","store","getLocals","getState","components","getAllLocals","Promise","resolve","then","catch","error"],"mappings":";;;;;;kBAIe,gBAA6CA,EAA7C,EAAiD;AAAA,MAArCC,WAAqC,QAArCA,WAAqC;AAAA,MAAxBC,KAAwB,QAAxBA,KAAwB;AAAA,MAAjBC,SAAiB,QAAjBA,SAAiB;AAAA,MACtDC,QADsD,GACzCF,KADyC,CACtDE,QADsD;AAAA,MAEtDC,UAFsD,GAEvCJ,WAFuC,CAEtDI,UAFsD;;AAG9D,MAAMC,eAAe,yBAAgBL,WAAhB,EAA6BC,KAA7B,EAAoCC,SAApC,CAArB;;AAEA;AACA,SAAOI,QACJC,OADI,GAEJC,IAFI,CAEC;AAAA,WAAM,mDAA8BJ,UAA9B,EAA0CC,YAA1C,CAAN;AAAA,GAFD,EAGJG,IAHI,CAGC;AAAA,WAAM,gDAA2BJ,UAA3B,EAAuCC,YAAvC,CAAN;AAAA,GAHD,EAIJG,IAJI,CAIC,YAAM;AACVT,OAAG,IAAH,EAASI,UAAT;AACD,GANI,EAOJM,KAPI,CAOE,UAACC,KAAD,EAAW;AAChBX,OAAGW,KAAH,EAAU,IAAV;AACD,GATI,CAAP;AAUD,C;;AApBD;;AACA;;;;AACA","file":"loadServerState.js","sourcesContent":["import { PREFETCH, FETCH } from './type';\nimport createGetLocals from './getLocals';\nimport getDataDependencies from './getDataDependencies';\n\nexport default function ({ renderProps, store, getLocals }, cb) {\n  const { getState } = store;\n  const { components } = renderProps;\n  const getAllLocals = createGetLocals(renderProps, store, getLocals);\n\n  // fetch data\n  return Promise\n    .resolve()\n    .then(() => getDataDependencies(PREFETCH, components, getAllLocals))\n    .then(() => getDataDependencies(FETCH, components, getAllLocals))\n    .then(() => {\n      cb(null, getState());\n    })\n    .catch((error) => {\n      cb(error, null);\n    });\n}\n"]}