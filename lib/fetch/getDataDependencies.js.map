{"version":3,"sources":["../../src/fetch/getDataDependencies.js"],"names":["getDataDependencies","getHooks","component","hooks","WrappedComponent","type","components","getLocals","map","filter","value","reduce","promise","then","hook","Promise","resolve"],"mappings":";;;;;kBAWwBA,mB;;AAXxB;;;;;;AAEA,SAASC,QAAT,GAAkC;AAAA,MAAhBC,SAAgB,yDAAJ,EAAI;;AAChC,MAAIA,6BAAJ,EAAyB;AACvB,WAAO,EAAEA,oBAAF,EAAaC,OAAOD,6BAApB,EAAP;AACD,GAFD,MAEO,IAAIA,UAAUE,gBAAd,EAAgC;AACrC,WAAOH,SAASC,UAAUE,gBAAnB,CAAP;AACD;AACD,SAAO,IAAP;AACD;;AAEc,SAASJ,mBAAT,CAA6BK,IAA7B,EAAmCC,UAAnC,EAA+CC,SAA/C,EAA0D;AACvE,SAAOD;AACL;AADK,GAEJE,GAFI,CAEAP,QAFA;AAGL;AAHK,GAIJQ,MAJI,CAIG,UAACC,KAAD;AAAA,WAAWA,KAAX;AAAA,GAJH;AAKL;AALK,GAMJC,MANI,CAMG,UAACC,OAAD;AAAA,QAAYV,SAAZ,QAAYA,SAAZ;AAAA,QAAuBC,KAAvB,QAAuBA,KAAvB;AAAA,WAAmCS,QAAQC,IAAR,CAAa,YAAM;AAC5D,UAAMC,OAAOX,MAAME,IAAN,CAAb;;AAEA,UAAI,OAAOS,IAAP,KAAgB,UAApB,EAAgC;AAC9B,eAAOC,QAAQC,OAAR,EAAP;AACD;;AAED,aAAOF,KAAKP,UAAUL,SAAV,EAAqBI,UAArB,CAAL,CAAP;AACD,KAR0C,CAAnC;AAAA,GANH,EAcDS,QAAQC,OAAR,EAdC,CAAP;AAeD","file":"getDataDependencies.js","sourcesContent":["import propName from './propName';\n\nfunction getHooks(component = {}) {\n  if (component[propName]) {\n    return { component, hooks: component[propName] };\n  } else if (component.WrappedComponent) {\n    return getHooks(component.WrappedComponent);\n  }\n  return null;\n}\n\nexport default function getDataDependencies(type, components, getLocals) {\n  return components\n    // collect all components with their fetch hooks\n    .map(getHooks)\n    // filter out falsy components\n    .filter((value) => value)\n    // call fetch data methods sequentially and return single promise\n    .reduce((promise, { component, hooks }) => promise.then(() => {\n      const hook = hooks[type];\n\n      if (typeof hook !== 'function') {\n        return Promise.resolve();\n      }\n\n      return hook(getLocals(component, components));\n    }), Promise.resolve());\n}\n"]}